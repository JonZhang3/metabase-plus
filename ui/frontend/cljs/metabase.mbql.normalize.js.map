{"version":3,"sources":["metabase/mbql/normalize.cljc"],"mappings":"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","names":["metabase.mbql.normalize/mbql-clause?","x","cljs.core/sequential?","cljs.core/map-entry?","cljs.core.some_fn","cljs.core/keyword?","cljs.core/string?","cljs.core/first","metabase.mbql.normalize/maybe-normalize-token","metabase.mbql.util/normalize-token","metabase.mbql.normalize/is-clause?","k-or-ks","and__4115__auto__","clause-name","cljs.core/coll?","fexpr__43309","cljs.core/set","cljs.core._EQ_","js/metabase","js/metabase.mbql","js/metabase.mbql.normalize","js/metabase.mbql.normalize.normalize-mbql-clause-tokens","method-table__4619__auto__","cljs.core.atom","prefer-table__4620__auto__","method-cache__4621__auto__","cached-hierarchy__4622__auto__","hierarchy__4623__auto__","cljs.core.get","fexpr__43312","cljs.core/MultiFn","cljs.core.symbol","metabase.mbql.normalize/normalize-mbql-clause-tokens","cljs.core.comp","p__43313","vec__43314","cljs.core.nth","_","expression-name","cljs.core/Keyword","metabase.mbql.util/qualified-name","p__43317","vec__43318","field","strategy-name","strategy-param","cljs.core.conj","metabase.mbql.normalize/normalize-tokens","p__43321","vec__43322","id-or-name","opts","G__43325","cljs.core.update","cljs.core/keyword","binning","G__43326","p__43327","vec__43328","field-name","field-type","cljs.core.keyword","p__43331","vec__43332","as-or-unit","maybe-unit","p__43335","vec__43336","amount","unit","options","cljs.core/integer?","p__43339","vec__43340","p__43343","vec__43344","p__43348","vec__43349","seq__43350","cljs.core/seq","first__43351","cljs.core/next","args","cljs.core.into","p1__43347#","cljs.core.map","metabase.mbql.normalize/aggregation-subclause?","or__4126__auto__","G__43355","fexpr__43354","G__43356","metabase.mbql.normalize/normalize-ag-clause-tokens","ag-clause","vec__43357","seq__43358","first__43359","wrapped-ag","more","cljs.core/second","cljs.core.mapv","metabase.mbql.normalize/normalize-expressions-tokens","expressions-clause","iter__4529__auto__","s__43361","cljs.core/LazySeq","temp__5735__auto__","cljs.core/chunked-seq?","c__4527__auto__","size__4528__auto__","cljs.core/count","b__43363","cljs.core/chunk-buffer","i__43362","vec__43364","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__43360","cljs.core/chunk-rest","vec__43367","cljs.core/cons","cljs.core/rest","definition","metabase.mbql.normalize/normalize-order-by-tokens","clauses","cljs.core/vec","s__43371","b__43373","i__43372","iter__43370","subclause","cljs.core/reverse","metabase.mbql.normalize/normalize-template-tags","template-tags","s__43375","b__43377","i__43376","vec__43378","iter__43374","vec__43384","tag-name","tag-def","tag-def'","G__43381","G__43382","G__43387","G__43388","cljs.core.dissoc","G__43383","G__43389","cljs.core.assoc","p__43396","map__43398","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","metabase.mbql.normalize/normalize-query-parameter","type","target","param","G__43403","p1__43395#","metabase.mbql.normalize/normalize-source-query","source-query","map__43410","native?","medley.core/map-keys","clojure.set/rename-keys","G__43414","G__43415","G__43416","G__43417","metabase.mbql.normalize/normalize-join","join","map__43423","strategy","fields","alias","G__43427","js/Error","metabase.mbql.normalize/normalize-source-metadata","metadata","cljs.core/map?","p1__43433#","p2__43434#","cljs.core.reduce","medley.core.update_existing","metabase.mbql.normalize/canonicalize-mbql-clauses","clojure.walk/keywordize-keys","metabase.mbql.normalize/normalize-native-query","native-query","G__43449","p1__43452#","metabase.mbql.normalize/path->special-token-normalization-fn","G__43453","var_args","args__4742__auto__","len__4736__auto__","i__4737__auto__","argseq__4743__auto__","cljs.core/IndexedSeq","p__43476","vec__43477","seq43467","G__43468","self__4723__auto__","path","special-fn","cljs.core.get_in","e43481","cljs.core/fn?","cljs.core/record?","s__43484","b__43486","i__43485","vec__43487","iter__43483","vec__43490","k","v","metabase.mbql.normalize.normalize_tokens","p1__43460#","e","cljs.core.ex_info","metabase.shared.util.i18n/js-i18n","metabase.mbql.normalize/wrap-implicit-field-id","js/metabase.mbql.normalize.canonicalize-mbql-clause","fexpr__43493","metabase.mbql.normalize/canonicalize-mbql-clause","clause","metabase.mbql.normalize/canonicalize-implicit-field-id","p__43494","vec__43495","vec__43498","nested-id-or-name","nested-opts","cljs.core/not-empty","cljs.core.merge","p__43501","vec__43502","id","p__43505","vec__43506","base-type","p__43509","vec__43510","field-1","field-2","vec__43513","vec__43516","source","dest","dest-opts","p__43519","vec__43520","join-alias","metabase.mbql.util.assoc_field_options","G__43523","vec__43524","metabase.mbql.util/with-temporal-unit","vec__43527","p__43530","vec__43531","binning-options","vec__43534","p__43537","vec__43538","seq__43539","first__43540","metabase.mbql.normalize/canonicalize-compound-filter-clause","filter-name","metabase.mbql.util/simplify-compound-filter","seq__43541","chunk__43542","count__43543","i__43544","c__4556__auto__","cljs.core/chunk-first","p__43545","vec__43546","seq__43547","first__43548","coordinates","p__43549","vec__43551","seq__43552","first__43553","G__43554","metabase.mbql.util/is-clause?","metabase.mbql.util.update_field_options","cljs.core/dissoc","p__43555","vec__43556","seq__43557","first__43558","metabase.mbql.normalize/canonicalize-simple-filter-clause","first-arg","other-args","seq__43560","chunk__43561","count__43562","i__43563","p__43564","vec__43565","wrapped-aggregation-clause","p__43568","vec__43569","seq__43570","first__43571","expr-name","vec__43577","map__43580","use-as-display-name?","p__43591","vec__43592","metabase.mbql.normalize/canonicalize-count-clause","seq__43595","chunk__43596","count__43597","i__43598","p__43606","vec__43607","metabase.mbql.normalize/canonicalize-simple-aggregation-with-field","seq__43610","chunk__43611","count__43612","i__43613","p__43619","vec__43620","percentile","p__43630","vec__43631","metabase.mbql.normalize/canonicalize-filtered-aggregation-clause","filter-subclause","seq__43636","chunk__43637","count__43638","i__43639","p__43653","vec__43660","p__43663","vec__43665","s__43670","b__43672","i__43671","vec__43673","iter__43669","vec__43676","pred","expr","mbql-query","clojure.walk/prewalk","medley.core.map_vals","cljs.core/not","e43680","logger-name__41931__auto__","metabase.shared.util.log/is-loggable?","metabase.shared.util.log.log_STAR_","metabase.shared.util.log/log-message","metabase.mbql.normalize/wrap-single-aggregations","aggregations","&parents","&match","fexpr__43750","metabase.mbql.util.match.impl/match-with-pred-or-class","replace-43688","cljs.core.match/backtrack","e43717","e__40407__auto__","fexpr__43748","e43718","cljs.core/vector?","&match_left__43703","cljs.core.subvec","&match_left__43703_0__43705","&match_left__43703_1__43706","e43740","e43738","e43732","e43720","&match_left__43708","&match_left__43708_0__43716","e43729","e43723","e43722","cljs.core/seq?","cljs.core.every_pred","cljs.core/complement","cljs.core/concat","metabase.mbql.normalize/canonicalize-aggregations","cljs.core.keep","metabase.mbql.normalize/canonicalize-breakouts","breakouts","metabase.mbql.normalize/canonicalize-order-by","fexpr__43803","replace-43751","e43766","&match_1__43756","cljs.core/keyword-identical?","e43785","e43786","e43788","e43789","&match_0__43755","e43790","e43791","e43792","e43793","e43767","&match_left__43764","&match_right__43765","e43776","e43775","e43769","metabase.mbql.util.match.impl/replace-in-collection","cljs.core.distinct","p__43812","map__43813","metabase.mbql.normalize/canonicalize-template-tag","dimension","tag","G__43816","metabase.mbql.normalize/canonicalize-template-tags","tags","s__43825","b__43827","i__43826","vec__43830","iter__43824","vec__43833","p__43842","map__43844","metabase.mbql.normalize/canonicalize-native-query","G__43846","p__43853","map__43854","metabase.mbql.normalize/canonicalize-source-query","G__43858","metabase.mbql.normalize/canonicalize-inner-mbql-query","metabase.mbql.normalize/non-empty?","metabase.mbql.normalize/canonicalize-top-level-mbql-clauses","G__43867","cljs.core.partial","cljs.core/mapv","p__43870","map__43871","metabase.mbql.normalize/move-source-metadata-to-mbql-query","source-metadata","query","cljs.core/assoc-in","p__43873","map__43874","metabase.mbql.normalize/canonicalize","parameters","native","outer-query","e43876","G__43877","p__43878","map__43879","map__43880","metabase.mbql.normalize/remove-breakout-fields-from-fields","breakout","breakout-fields","cljs.core.filter","cljs.core/some?","&match_0__43891","e43896","e43894","metabase.mbql.util.match.impl/match-in-collection","match-43883","cljs.core.update_in","cljs.core/remove","metabase.mbql.normalize/perform-whole-query-transformations","e43905","metabase.mbql.normalize/remove-empty-clauses-in-map","m","cljs.core/empty","s__43914","b__43916","i__43915","vec__43917","iter__43913","vec__43922","G__43920","G__43921","G__43925","G__43926","metabase.mbql.normalize/remove-empty-clauses","metabase.mbql.normalize/remove-empty-clauses-in-sequence","xs","p1__43928#","G__43934","G__43935","cljs.core/some","metabase.mbql.normalize/remove-empty-clauses-in-join","G__43943","G__43944","p__43947","map__43948","metabase.mbql.normalize/remove-empty-clauses-in-source-query","G__43950","G__43951","G__43952","G__43953","metabase.mbql.normalize/path->special-remove-empty-clauses-fn","cljs.core/identity","G__43956","metabase.mbql.normalize.remove_empty_clauses","e43957","metabase.mbql.normalize/normalize","normalize*","e43965","metabase.mbql.normalize/normalize-fragment","G__43971","G__43972","cljs.core/butlast","cljs.core/last"],"sourcesContent":["(ns metabase.mbql.normalize\n  \"Logic for taking any sort of weird MBQL query and normalizing it into a standardized, canonical form. You can think\n  of this like taking any 'valid' MBQL query and rewriting it as-if it was written in perfect up-to-date MBQL in the\n  latest version. There are four main things done here, done as four separate steps:\n\n  #### NORMALIZING TOKENS\n\n  Converting all identifiers to lower-case, lisp-case keywords. e.g. `{\\\"SOURCE_TABLE\\\" 10}` becomes `{:source-table\n  10}`.\n\n  #### CANONICALIZING THE QUERY\n\n  Rewriting deprecated MBQL 95/98 syntax and other things that are still supported for backwards-compatibility in\n  canonical modern MBQL syntax. For example `{:breakout [:count 10]}` becomes `{:breakout [[:count [:field 10 nil]]]}`.\n\n  #### WHOLE-QUERY TRANSFORMATIONS\n\n  Transformations and cleanup of the query structure as a whole to fix inconsistencies. Whereas the canonicalization\n  phase operates on a lower-level, transforming invidual clauses, this phase focuses on transformations that affect\n  multiple clauses, such as removing duplicate references to Fields if they are specified in both the `:breakout` and\n  `:fields` clauses.\n\n  This is not the only place that does such transformations; several pieces of QP middleware perform similar\n  individual transformations, such as `reconcile-breakout-and-order-by-bucketing`.\n\n  #### REMOVING EMPTY CLAUSES\n\n  Removing empty clauses like `{:aggregation nil}` or `{:breakout []}`.\n\n  Token normalization occurs first, followed by canonicalization, followed by removing empty clauses.\"\n  (:require [clojure.set :as set]\n            [clojure.walk :as walk]\n            [medley.core :as m]\n            [metabase.mbql.util :as mbql.u]\n            [metabase.mbql.util.match :as mbql.match]\n            [metabase.shared.util.i18n :as i18n]\n            [metabase.shared.util.log :as log]))\n\n(defn- mbql-clause?\n  \"True if `x` is an MBQL clause (a sequence with a token as its first arg). (This is different from the implementation\n  in `mbql.u` because it also supports un-normalized clauses. You shouldn't need to use this outside of this\n  namespace.)\"\n  [x]\n  (and (sequential? x)\n       (not (map-entry? x))\n       ((some-fn keyword? string?) (first x))))\n\n(defn- maybe-normalize-token\n  \"Normalize token `x`, but only if it's a keyword or string.\"\n  [x]\n  (if ((some-fn keyword? string?) x)\n    (mbql.u/normalize-token x)\n    x))\n\n(defn is-clause?\n  \"If `x` an MBQL clause, and an instance of clauses defined by keyword(s) `k-or-ks`?\n\n    (is-clause? :count [:count 10])        ; -> true\n    (is-clause? #{:+ :- :* :/} [:+ 10 20]) ; -> true\n\n  (This is different from the implementation in `mbql.u` because it also supports un-normalized clauses. You shouldn't\n  need to use this outside of this namespace.)\"\n  [k-or-ks x]\n  (and\n   (mbql-clause? x)\n   (let [clause-name (maybe-normalize-token (first x))]\n     (if (coll? k-or-ks)\n       ((set k-or-ks) clause-name)\n       (= k-or-ks clause-name)))))\n\n\n;;; +----------------------------------------------------------------------------------------------------------------+\n;;; |                                                NORMALIZE TOKENS                                                |\n;;; +----------------------------------------------------------------------------------------------------------------+\n\n(declare normalize-tokens)\n\n(defmulti ^:private normalize-mbql-clause-tokens\n  (comp maybe-normalize-token first))\n\n(defmethod normalize-mbql-clause-tokens :expression\n  ;; For expression references (`[:expression \\\"my_expression\\\"]`) keep the arg as is but make sure it is a string.\n  [[_ expression-name]]\n  [:expression (if (keyword? expression-name)\n                 (mbql.u/qualified-name expression-name)\n                 expression-name)])\n\n(defmethod normalize-mbql-clause-tokens :binning-strategy\n  ;; For `:binning-strategy` clauses (which wrap other Field clauses) normalize the strategy-name and recursively\n  ;; normalize the Field it bins.\n  [[_ field strategy-name strategy-param]]\n  (if strategy-param\n    (conj (normalize-mbql-clause-tokens [:binning-strategy field strategy-name]) strategy-param)\n    [:binning-strategy (normalize-tokens field :ignore-path) (maybe-normalize-token strategy-name)]))\n\n(defmethod normalize-mbql-clause-tokens :field\n  [[_ id-or-name opts]]\n  (let [opts (normalize-tokens opts :ignore-path)]\n    [:field\n     id-or-name\n     (cond-> opts\n       (:base-type opts)     (update :base-type keyword)\n       (:temporal-unit opts) (update :temporal-unit keyword)\n       (:binning opts)       (update :binning (fn [binning]\n                                                (cond-> binning\n                                                  (:strategy binning) (update :strategy keyword)))))]))\n\n(defmethod normalize-mbql-clause-tokens :field-literal\n  ;; Similarly, for Field literals, keep the arg as-is, but make sure it is a string.\"\n  [[_ field-name field-type]]\n  [:field-literal\n   (if (keyword? field-name)\n     (mbql.u/qualified-name field-name)\n     field-name)\n   (keyword field-type)])\n\n(defmethod normalize-mbql-clause-tokens :datetime-field\n  ;; Datetime fields look like `[:datetime-field <field> <unit>]` or `[:datetime-field <field> :as <unit>]`\n  ;; normalize the unit, and `:as` (if present) tokens, and the Field.\"\n  [[_ field as-or-unit maybe-unit]]\n  (if maybe-unit\n    [:datetime-field (normalize-tokens field :ignore-path) :as (maybe-normalize-token maybe-unit)]\n    [:datetime-field (normalize-tokens field :ignore-path) (maybe-normalize-token as-or-unit)]))\n\n(defmethod normalize-mbql-clause-tokens :time-interval\n  ;; `time-interval`'s `unit` should get normalized, and `amount` if it's not an integer.\"\n  [[_ field amount unit options]]\n  (if options\n    (conj (normalize-mbql-clause-tokens [:time-interval field amount unit])\n          (normalize-tokens options :ignore-path))\n    [:time-interval\n     (normalize-tokens field :ignore-path)\n     (if (integer? amount)\n       amount\n       (maybe-normalize-token amount))\n     (maybe-normalize-token unit)]))\n\n(defmethod normalize-mbql-clause-tokens :relative-datetime\n  ;; Normalize a `relative-datetime` clause. `relative-datetime` comes in two flavors:\n  ;;\n  ;;   [:relative-datetime :current]\n  ;;   [:relative-datetime -10 :day] ; amount & unit\"\n  [[_ amount unit]]\n  (if unit\n    [:relative-datetime amount (maybe-normalize-token unit)]\n    [:relative-datetime :current]))\n\n(defmethod normalize-mbql-clause-tokens :interval\n  [[_ amount unit]]\n  [:interval amount (maybe-normalize-token unit)])\n\n(defmethod normalize-mbql-clause-tokens :default\n  ;; MBQL clauses by default get just the clause name normalized (e.g. `[\\\"COUNT\\\" ...]` becomes `[:count ...]`) and the\n  ;; args are left as-is.\n  [[clause-name & args]]\n  (into [(maybe-normalize-token clause-name)] (map #(normalize-tokens % :ignore-path)) args))\n\n(defn- aggregation-subclause?\n  [x]\n  (or (when ((some-fn keyword? string?) x)\n        (#{:avg :count :cum-count :distinct :stddev :sum :min :max :+ :- :/ :*\n           :sum-where :count-where :share :var :median :percentile}\n         (maybe-normalize-token x)))\n      (when (mbql-clause? x)\n        (aggregation-subclause? (first x)))))\n\n(defn- normalize-ag-clause-tokens\n  \"For old-style aggregations like `{:aggregation :count}` make sure we normalize the ag type (`:count`). Other wacky\n  clauses like `{:aggregation [:count :count]}` need to be handled as well :(\"\n  [ag-clause]\n  (cond\n    ;; something like {:aggregations :count}\n    ((some-fn keyword? string?) ag-clause)\n    (maybe-normalize-token ag-clause)\n\n    ;; named aggregation ([:named <ag> <name>])\n    (is-clause? :named ag-clause)\n    (let [[_ wrapped-ag & more] ag-clause]\n      (into [:named (normalize-ag-clause-tokens wrapped-ag)] more))\n\n    ;; something wack like {:aggregations [:count [:sum 10]]} or {:aggregations [:count :count]}\n    (when (mbql-clause? ag-clause)\n      (aggregation-subclause? (second ag-clause)))\n    (mapv normalize-ag-clause-tokens ag-clause)\n\n    :else\n    (normalize-tokens ag-clause :ignore-path)))\n\n(defn- normalize-expressions-tokens\n  \"For expressions, we don't want to normalize the name of the expression; keep that as is, but make it a keyword;\n   normalize the definitions as normal.\"\n  [expressions-clause]\n  (into {} (for [[expression-name definition] expressions-clause]\n             [(keyword expression-name)\n              (normalize-tokens definition :ignore-path)])))\n\n(defn- normalize-order-by-tokens\n  \"Normalize tokens in the order-by clause, which can have different syntax when using MBQL 95 or 98\n  rules (`[<field> :asc]` vs `[:asc <field>]`, for example).\"\n  [clauses]\n  (vec (for [subclause clauses]\n         (if (mbql-clause? subclause)\n           ;; MBQL 98+ [direction field] style: normalize as normal\n           (normalize-mbql-clause-tokens subclause)\n           ;; otherwise it's MBQL 95 [field direction] style: flip the args and *then* normalize the clause. And then\n           ;; flip it back to put it back the way we found it.\n           (reverse (normalize-mbql-clause-tokens (reverse subclause)))))))\n\n(defn- normalize-template-tags\n  \"Normalize native-query template tags. Like `expressions` we want to preserve the original name rather than normalize\n  it.\"\n  [template-tags]\n  (into {} (for [[tag-name tag-def] template-tags]\n             [(mbql.u/qualified-name tag-name)\n              (let [tag-def' (normalize-tokens (dissoc tag-def :default) :ignore-path)]\n                (cond-> tag-def'\n                  (:default tag-def)      (assoc :default (:default tag-def)) ;; don't normalize default values\n                  (:type tag-def')        (update :type maybe-normalize-token)\n                  (:widget-type tag-def') (update :widget-type maybe-normalize-token)))])))\n\n(defn- normalize-query-parameter [{:keys [type target], :as param}]\n  (cond-> param\n    ;; some things that get ran thru here, like dashcard param targets, do not have :type\n    type   (update :type maybe-normalize-token)\n    target (update :target #(normalize-tokens % :ignore-path))))\n\n(defn- normalize-source-query [source-query]\n  (let [{native? :native, :as source-query} (m/map-keys maybe-normalize-token source-query)]\n    (if native?\n      (-> source-query\n          (set/rename-keys {:native :query})\n          (normalize-tokens [:native])\n          (set/rename-keys {:query :native}))\n      (normalize-tokens source-query [:query]))))\n\n(defn- normalize-join [join]\n  ;; path in call to `normalize-tokens` is [:query] so it will normalize `:source-query` as appropriate\n  (let [{:keys [strategy fields alias], :as join} (normalize-tokens join :query)]\n    (cond-> join\n      strategy\n      (update :strategy maybe-normalize-token)\n\n      ((some-fn keyword? string?) fields)\n      (update :fields maybe-normalize-token)\n\n      alias\n      (update :alias mbql.u/qualified-name))))\n\n(declare canonicalize-mbql-clauses)\n\n(defn normalize-source-metadata\n  \"Normalize source/results metadata for a single column.\"\n  [metadata]\n  {:pre [(map? metadata)]}\n  (-> (reduce #(m/update-existing %1 %2 keyword) metadata [:base_type :effective_type :semantic_type :visibility_type :source :unit])\n      (m/update-existing :field_ref (comp canonicalize-mbql-clauses normalize-tokens))\n      (m/update-existing :fingerprint walk/keywordize-keys)))\n\n(defn- normalize-native-query\n  \"For native queries, normalize the top-level keys, and template tags, but nothing else.\"\n  [native-query]\n  (let [native-query (m/map-keys maybe-normalize-token native-query)]\n    (cond-> native-query\n      (seq (:template-tags native-query)) (update :template-tags normalize-template-tags))))\n\n;; TODO - why not make this a multimethod of some sort?\n(def ^:private path->special-token-normalization-fn\n  \"Map of special functions that should be used to perform token normalization for a given path. For example, the\n  `:expressions` key in an MBQL query should preserve the case of the expression names; this custom behavior is\n  defined below.\"\n  {:type            maybe-normalize-token\n   ;; don't normalize native queries\n   :native          normalize-native-query\n   :query           {:aggregation     normalize-ag-clause-tokens\n                     :expressions     normalize-expressions-tokens\n                     :order-by        normalize-order-by-tokens\n                     :source-query    normalize-source-query\n                     :source-metadata {::sequence normalize-source-metadata}\n                     :joins           {::sequence normalize-join}}\n   :parameters      {::sequence normalize-query-parameter}\n   :context         #(some-> % maybe-normalize-token)\n   :source-metadata {::sequence normalize-source-metadata}})\n\n(defn normalize-tokens\n  \"Recursively normalize tokens in `x`.\n\n  Every time this function recurses (thru a map value) it adds a new (normalized) key to key path, e.g. `path` will be\n  `[:query :order-by]` when we're in the MBQL order-by clause. If we need to handle these top-level clauses in special\n  ways add a function to `path->special-token-normalization-fn` above.\n\n  In some cases, dealing with the path isn't desirable, but we don't want to accidentally trigger normalization\n  functions (such as accidentally normalizing the `:type` key in something other than the top-level of the query), so\n  by convention please pass `:ignore-path` to avoid accidentally triggering path functions.\"\n  [x & [path]]\n  (let [path       (if (keyword? path)\n                     [path]\n                     (vec path))\n        special-fn (when (seq path)\n                     (get-in path->special-token-normalization-fn path))]\n    (try\n      (cond\n        (fn? special-fn)\n        (special-fn x)\n\n        ;; Skip record types because this query is an `expanded` query, which is not going to play nice here. Hopefully we\n        ;; can remove expanded queries entirely soon.\n        (record? x)\n        x\n\n        ;; maps should just get the keys normalized and then recursively call normalize-tokens on the values.\n        ;; Each recursive call appends to the keypath above so we can handle top-level clauses in a special way if needed\n        (map? x)\n        (into {} (for [[k v] x\n                       :let  [k (maybe-normalize-token k)]]\n                   [k (normalize-tokens v (conj (vec path) k))]))\n\n        ;; MBQL clauses handled above because of special cases\n        (mbql-clause? x)\n        (normalize-mbql-clause-tokens x)\n\n        ;; for non-mbql sequential collections (probably something like the subclauses of :order-by or something like\n        ;; that) recurse on all the args.\n        ;;\n        ;; To signify that we're recursing into a sequential collection, this appends `::sequence` to path\n        (sequential? x)\n        (mapv #(normalize-tokens % (conj (vec path) ::sequence)) x)\n\n        :else\n        x)\n      (catch #?(:clj Throwable :cljs js/Error) e\n        (throw (ex-info (i18n/tru \"Error normalizing form.\")\n                        {:form x, :path path, :special-fn special-fn}\n                        e))))))\n\n\n;;; +----------------------------------------------------------------------------------------------------------------+\n;;; |                                                  CANONICALIZE                                                  |\n;;; +----------------------------------------------------------------------------------------------------------------+\n\n(defn- wrap-implicit-field-id\n  \"Wrap raw integer Field IDs (i.e., those in an implicit 'field' position) in a `:field` clause if they're not\n  already. Done for MBQL 95 backwards-compatibility. e.g.:\n\n    {:filter [:= 10 20]} ; -> {:filter [:= [:field 10 nil] 20]}\"\n  [field]\n  (if (integer? field)\n    [:field field nil]\n    field))\n\n(defmulti ^:private canonicalize-mbql-clause\n  {:arglists '([clause])}\n  (fn [clause]\n    (when (mbql-clause? clause)\n      (first clause))))\n\n(defmethod canonicalize-mbql-clause :default\n  [clause]\n  clause)\n\n(defn- canonicalize-implicit-field-id\n  \"If `clause` is a raw integer ID wrap it in a `:field` clause. Either way, canonicalize the resulting clause.\"\n  [clause]\n  (canonicalize-mbql-clause (wrap-implicit-field-id clause)))\n\n(defmethod canonicalize-mbql-clause :field\n  [[_ id-or-name opts :as clause]]\n  (if (is-clause? :field id-or-name)\n    (let [[_ nested-id-or-name nested-opts] id-or-name]\n      (canonicalize-mbql-clause [:field nested-id-or-name (not-empty (merge nested-opts opts))]))\n    ;; remove empty stuff from the options map. The `remove-empty-clauses` step will further remove empty stuff\n    ;; afterwards\n    [:field id-or-name (not-empty opts)]))\n\n;;; legacy Field clauses\n\n(defmethod canonicalize-mbql-clause :field-id\n  [[_ id]]\n  ;; if someone is dumb and does something like [:field-id [:field-literal ...]] be nice and fix it for them.\n  (if (mbql-clause? id)\n    (canonicalize-mbql-clause id)\n    [:field id nil]))\n\n(defmethod canonicalize-mbql-clause :field-literal\n  [[_ field-name base-type]]\n  [:field field-name {:base-type base-type}])\n\n(defmethod canonicalize-mbql-clause :fk->\n  [[_ field-1 field-2]]\n  (let [[_ source _]       (canonicalize-implicit-field-id field-1)\n        [_ dest dest-opts] (canonicalize-implicit-field-id field-2)]\n    [:field dest (assoc dest-opts :source-field source)]))\n\n(defmethod canonicalize-mbql-clause :joined-field\n  [[_ join-alias field]]\n  (-> (canonicalize-implicit-field-id field)\n      (mbql.u/assoc-field-options :join-alias join-alias)))\n\n(defmethod canonicalize-mbql-clause :datetime-field\n  [clause]\n  (case (count clause)\n    3\n    (let [[_ field unit] clause]\n      (-> (canonicalize-implicit-field-id field)\n          (mbql.u/with-temporal-unit unit)))\n\n    4\n    (let [[_ field _ unit] clause]\n      (canonicalize-mbql-clause [:datetime-field field unit]))))\n\n(defmethod canonicalize-mbql-clause :binning-strategy\n  [[_ field strategy param binning-options]]\n  (let [[_ id-or-name opts] (canonicalize-implicit-field-id field)]\n    [:field\n     id-or-name\n     (assoc opts :binning (merge {:strategy strategy}\n                                 (when param\n                                   {strategy param})\n                                 binning-options))]))\n\n;;; filter clauses\n\n;; For `and`/`or`/`not` compound filters, recurse on the arg(s), then simplify the whole thing.\n(defn- canonicalize-compound-filter-clause [[filter-name & args]]\n  (mbql.u/simplify-compound-filter\n   (into [filter-name]\n         ;; we need to canonicalize any other mbql clauses that might show up in args here because\n         ;; simplify-compund-filter validates its output :(\n         (map canonicalize-mbql-clause args))))\n\n(doseq [clause-name [:and :or :not]]\n  (defmethod canonicalize-mbql-clause clause-name\n    [clause]\n    (canonicalize-compound-filter-clause clause)))\n\n(defmethod canonicalize-mbql-clause :inside\n  [[_ field-1 field-2 & coordinates]]\n  (into [:inside\n         (canonicalize-implicit-field-id field-1)\n         (canonicalize-implicit-field-id field-2)]\n        coordinates))\n\n(defmethod canonicalize-mbql-clause :time-interval\n  [[_ field & args]]\n  ;; if you specify a `:temporal-unit` for the Field inside a `:time-interval`, remove it. The unit in\n  ;; `:time-interval` takes precedence.\n  (let [field (cond-> (canonicalize-implicit-field-id field)\n                (mbql.u/is-clause? :field field) (mbql.u/update-field-options dissoc :temporal-unit))]\n    (into [:time-interval field] args)))\n\n;; all the other filter types have an implict field ID for the first arg\n;; (e.g. [:= 10 20] gets canonicalized to [:= [:field-id 10] 20]\n(defn- canonicalize-simple-filter-clause\n  [[filter-name first-arg & other-args]]\n  ;; Support legacy expressions like [:> 1 25] where 1 is a field id.\n  (into [filter-name (canonicalize-implicit-field-id first-arg)]\n        (map canonicalize-mbql-clause other-args)))\n\n(doseq [clause-name [:starts-with :ends-with :contains :does-not-contain\n                     := :!= :< :<= :> :>=\n                     :is-empty :not-empty :is-null :not-null\n                     :between]]\n  (defmethod canonicalize-mbql-clause clause-name\n    [clause]\n    (canonicalize-simple-filter-clause clause)))\n\n;;; aggregations/expression subclauses\n\n;; Remove `:rows` type aggregation (long-since deprecated; simpliy means no aggregation) if present\n(defmethod canonicalize-mbql-clause :rows\n  [_]\n  nil)\n\n;; TODO -- if options is empty, should we just unwrap the clause?\n(defmethod canonicalize-mbql-clause :aggregation-options\n  [[_ wrapped-aggregation-clause options]]\n  [:aggregation-options (canonicalize-mbql-clause wrapped-aggregation-clause) options])\n\n;; for legacy `:named` aggregations convert them to a new-style `:aggregation-options` clause.\n;;\n;; 99.99% of clauses should have no options, however if they do and `:use-as-display-name?` is false (default is\n;; true) then generate options to change `:name` rather than `:display-name`\n(defmethod canonicalize-mbql-clause :named\n  [[_ wrapped-ag expr-name & more]]\n  (canonicalize-mbql-clause\n   [:aggregation-options\n    (canonicalize-mbql-clause wrapped-ag)\n    (let [[{:keys [use-as-display-name?]}] more]\n      (if (false? use-as-display-name?)\n        {:name expr-name}\n        {:display-name expr-name}))]))\n\n(defn- canonicalize-count-clause [[clause-name field]]\n  (if field\n    [clause-name (canonicalize-implicit-field-id field)]\n    [clause-name]))\n\n(doseq [clause-name [:count :cum-count]]\n  (defmethod canonicalize-mbql-clause clause-name\n    [clause]\n    (canonicalize-count-clause clause)))\n\n(defn- canonicalize-simple-aggregation-with-field\n  [[clause-name field]]\n  [clause-name (canonicalize-implicit-field-id field)])\n\n(doseq [clause-name [:avg :cum-sum :distinct :stddev :sum :min :max :median :var]]\n  (defmethod canonicalize-mbql-clause clause-name\n    [clause]\n    (canonicalize-simple-aggregation-with-field clause)))\n\n(defmethod canonicalize-mbql-clause :percentile\n  [[_ field percentile]]\n  [:percentile (canonicalize-implicit-field-id field) percentile])\n\n(defn- canonicalize-filtered-aggregation-clause\n  [[clause-name filter-subclause]]\n  [clause-name (canonicalize-mbql-clause filter-subclause)])\n\n(doseq [clause-name [:share :count-where]]\n  (defmethod canonicalize-mbql-clause clause-name\n    [clause]\n    (canonicalize-filtered-aggregation-clause clause)))\n\n(defmethod canonicalize-mbql-clause :sum-where\n  [[_ field filter-subclause]]\n  [:sum-where (canonicalize-mbql-clause field) (canonicalize-mbql-clause filter-subclause)])\n\n(defmethod canonicalize-mbql-clause :case\n  [[_ clauses options]]\n  (if options\n    (conj (canonicalize-mbql-clause [:case clauses])\n          (normalize-tokens options :ignore-path))\n    [:case (vec (for [[pred expr] clauses]\n                  [(canonicalize-mbql-clause pred) (canonicalize-mbql-clause expr)]))]))\n\n;;; top-level key canonicalization\n\n(defn- canonicalize-mbql-clauses\n  \"Walk an `mbql-query` an canonicalize non-top-level clauses like `:fk->`.\"\n  [mbql-query]\n  (walk/prewalk\n   (fn [x]\n     (cond\n       (map? x)\n       (m/map-vals canonicalize-mbql-clauses x)\n\n       (not (mbql-clause? x))\n       x\n\n       :else\n       (try\n         (canonicalize-mbql-clause x)\n         (catch #?(:clj Throwable :cljs js/Error) e\n           (log/error (i18n/tru \"Invalid clause:\") x)\n           (throw (ex-info (i18n/tru \"Invalid MBQL clause\")\n                           {:clause x}\n                           e))))))\n   mbql-query))\n\n(defn- wrap-single-aggregations\n  \"Convert old MBQL 95 single-aggregations like `{:aggregation :count}` or `{:aggregation [:count]}` to MBQL 98+\n  multiple-aggregation syntax (e.g. `{:aggregation [[:count]]}`).\"\n  [aggregations]\n  (mbql.match/replace aggregations\n    seq? (recur (vec &match))\n\n    ;; something like {:aggregations :count} -- MBQL 95 single aggregation\n    keyword?\n    [[&match]]\n\n    ;; special-case: MBQL 98 multiple aggregations using unwrapped :count or :rows\n    ;; e.g. {:aggregations [:count [:sum 10]]} or {:aggregations [:count :count]}\n    [(_ :guard (every-pred keyword? (complement #{:named :+ :- :* :/})))\n     (_ :guard aggregation-subclause?)\n     & _]\n    (vec (reduce concat (map wrap-single-aggregations aggregations)))\n\n    ;; something like {:aggregations [:sum 10]} -- MBQL 95 single aggregation\n    [(_ :guard keyword?) & _]\n    [&match]\n\n    _\n    &match))\n\n(defn- canonicalize-aggregations\n  \"Canonicalize subclauses (see above) and make sure `:aggregation` is a sequence of clauses instead of a single\n  clause.\"\n  [aggregations]\n  (->> (wrap-single-aggregations aggregations)\n       (keep canonicalize-mbql-clauses)\n       vec))\n\n(defn- canonicalize-breakouts [breakouts]\n  (if (mbql-clause? breakouts)\n    (recur [breakouts])\n    (not-empty (mapv wrap-implicit-field-id breakouts))))\n\n(defn- canonicalize-order-by\n  \"Make sure order by clauses like `[:asc 10]` get `:field-id` added where appropriate, e.g. `[:asc [:field-id 10]]`\"\n  [clauses]\n  (mbql.match/replace clauses\n    seq? (recur (vec &match))\n\n    ;; MBQL 95 reversed [<field> <direction>] clause\n    [field :asc]        (recur [:asc field])\n    [field :desc]       (recur [:desc field])\n    [field :ascending]  (recur [:asc field])\n    [field :descending] (recur [:desc field])\n\n    ;; MBQL 95 names but MBQL 98+ reversed syntax\n    [:ascending field]  (recur [:asc field])\n    [:descending field] (recur [:desc field])\n\n    [:asc field]  [:asc  (canonicalize-implicit-field-id field)]\n    [:desc field] [:desc (canonicalize-implicit-field-id field)]\n\n    ;; this case should be the first one hit when we come in with a vector of clauses e.g. [[:asc 1] [:desc 2]]\n    [& clauses] (vec (distinct (map canonicalize-order-by clauses)))))\n\n(declare canonicalize-inner-mbql-query)\n\n(defn- canonicalize-template-tag [{:keys [dimension], :as tag}]\n  (cond-> tag\n    dimension (update :dimension canonicalize-mbql-clause)))\n\n(defn- canonicalize-template-tags [tags]\n  (into {} (for [[tag-name tag] tags]\n             [tag-name (canonicalize-template-tag tag)])))\n\n(defn- canonicalize-native-query [{:keys [template-tags], :as native-query}]\n  (cond-> native-query\n    template-tags (update :template-tags canonicalize-template-tags)))\n\n(defn- canonicalize-source-query [{native? :native, :as source-query}]\n  (cond-> source-query\n    (not native?) canonicalize-inner-mbql-query\n    native?       canonicalize-native-query))\n\n(defn- non-empty? [x]\n  (if (coll? x)\n    (seq x)\n    (some? x)))\n\n(defn- canonicalize-top-level-mbql-clauses\n  \"Perform specific steps to canonicalize the various top-level clauses in an MBQL query.\"\n  [mbql-query]\n  (cond-> mbql-query\n    (non-empty? (:aggregation  mbql-query)) (update :aggregation  canonicalize-aggregations)\n    (non-empty? (:breakout     mbql-query)) (update :breakout     canonicalize-breakouts)\n    (non-empty? (:fields       mbql-query)) (update :fields       (partial mapv wrap-implicit-field-id))\n    (non-empty? (:order-by     mbql-query)) (update :order-by     canonicalize-order-by)\n    (non-empty? (:source-query mbql-query)) (update :source-query canonicalize-source-query)))\n\n(def ^:private ^{:arglists '([query])} canonicalize-inner-mbql-query\n  (comp canonicalize-mbql-clauses canonicalize-top-level-mbql-clauses))\n\n(defn- move-source-metadata-to-mbql-query\n  \"In Metabase 0.33.0 `:source-metadata` about resolved queries is added to the 'inner' MBQL query rather than to the\n  top-level; if we encounter the old style, move it to the appropriate location.\"\n  [{:keys [source-metadata], :as query}]\n  (-> query\n      (dissoc :source-metadata)\n      (assoc-in [:query :source-metadata] source-metadata)))\n\n(defn- canonicalize\n  \"Canonicalize a query [MBQL query], rewriting the query as if you perfectly followed the recommended style guides for\n  writing MBQL. Does things like removes unneeded and empty clauses, converts older MBQL '95 syntax to MBQL '98, etc.\"\n  [{:keys [query parameters source-metadata native], :as outer-query}]\n  (try\n    (cond-> outer-query\n      source-metadata move-source-metadata-to-mbql-query\n      query           (update :query canonicalize-inner-mbql-query)\n      parameters      (update :parameters (partial mapv canonicalize-mbql-clauses))\n      native          (update :native canonicalize-native-query)\n      true            canonicalize-mbql-clauses)\n    (catch #?(:clj Throwable :cljs js/Error) e\n      (throw (ex-info (i18n/tru \"Error canonicalizing query\")\n                      {:query query}\n                      e)))))\n\n\n;;; +----------------------------------------------------------------------------------------------------------------+\n;;; |                                          WHOLE-QUERY TRANSFORMATIONS                                           |\n;;; +----------------------------------------------------------------------------------------------------------------+\n\n(defn- remove-breakout-fields-from-fields\n  \"Remove any Fields specified in both `:breakout` and `:fields` from `:fields`; it is implied that any breakout Field\n  will be returned, specifying it in both would imply it is to be returned twice, which tends to cause confusion for\n  the QP and drivers. (This is done to work around historic bugs with the way queries were generated on the frontend;\n  I'm not sure this behavior makes sense, but removing it would break existing queries.)\n\n  We will remove either exact matches:\n\n    {:breakout [[:field-id 10]], :fields [[:field-id 10]]} ; -> {:breakout [[:field-id 10]]}\n\n  or unbucketed matches:\n\n    {:breakout [[:datetime-field [:field-id 10] :month]], :fields [[:field-id 10]]}\n    ;; -> {:breakout [[:field-id 10]]}\"\n  [{{:keys [breakout fields]} :query, :as query}]\n  (if-not (and (seq breakout) (seq fields))\n    query\n    ;; get a set of all Field clauses (of any type) in the breakout. For temporal-bucketed fields, we'll include both\n    ;; the bucketed `[:datetime-field <field> ...]` clause and the `<field>` clause it wraps\n    (let [breakout-fields (set (reduce concat (mbql.match/match breakout\n                                                [:field id-or-name opts]\n                                                [&match\n                                                 [:field id-or-name (dissoc opts :temporal-unit)]])))]\n      ;; now remove all the Fields in `:fields` that match the ones in the set\n      (update-in query [:query :fields] (comp vec (partial remove breakout-fields))))))\n\n(defn- perform-whole-query-transformations\n  \"Perform transformations that operate on the query as a whole, making sure the structure as a whole is logical and\n  consistent.\"\n  [query]\n  (try\n    (remove-breakout-fields-from-fields query)\n    (catch #?(:clj Throwable :cljs js/Error) e\n      (throw (ex-info (i18n/tru \"Error performing whole query transformations\")\n                      {:query query}\n                      e)))))\n\n;;; +----------------------------------------------------------------------------------------------------------------+\n;;; |                                             REMOVING EMPTY CLAUSES                                             |\n;;; +----------------------------------------------------------------------------------------------------------------+\n\n(declare remove-empty-clauses)\n\n(defn- remove-empty-clauses-in-map [m path]\n  (let [m (into (empty m) (for [[k v] m\n                                :let  [v (remove-empty-clauses v (conj path k))]\n                                :when (some? v)]\n                            [k v]))]\n    (when (seq m)\n      m)))\n\n(defn- remove-empty-clauses-in-sequence [xs path]\n  (let [xs (mapv #(remove-empty-clauses % (conj path ::sequence))\n                 xs)]\n    (when (some some? xs)\n      xs)))\n\n(defn- remove-empty-clauses-in-join [join]\n  (remove-empty-clauses join [:query]))\n\n(defn- remove-empty-clauses-in-source-query [{native? :native, :as source-query}]\n  (if native?\n    (-> source-query\n        (set/rename-keys {:native :query})\n        (remove-empty-clauses [:native])\n        (set/rename-keys {:query :native}))\n    (remove-empty-clauses source-query [:query])))\n\n(def ^:private path->special-remove-empty-clauses-fn\n  {:native identity\n   :query  {:source-query remove-empty-clauses-in-source-query\n            :joins        {::sequence remove-empty-clauses-in-join}}})\n\n(defn- remove-empty-clauses\n  \"Remove any empty or `nil` clauses in a query.\"\n  ([query]\n   (remove-empty-clauses query []))\n\n  ([x path]\n   (try\n     (let [special-fn (when (seq path)\n                        (get-in path->special-remove-empty-clauses-fn path))]\n       (cond\n         (fn? special-fn) (special-fn x)\n         (record? x)      x\n         (map? x)         (remove-empty-clauses-in-map x path)\n         (sequential? x)  (remove-empty-clauses-in-sequence x path)\n         :else            x))\n     (catch #?(:clj Throwable :cljs js/Error) e\n       (throw (ex-info \"Error removing empty clauses from form.\"\n                       {:form x, :path path}\n                       e))))))\n\n\n;;; +----------------------------------------------------------------------------------------------------------------+\n;;; |                                            PUTTING IT ALL TOGETHER                                             |\n;;; +----------------------------------------------------------------------------------------------------------------+\n\n(def ^{:arglists '([outer-query])} normalize\n  \"Normalize the tokens in a Metabase query (i.e., make them all `lisp-case` keywords), rewrite deprecated clauses as\n  up-to-date MBQL 2000, and remove empty clauses.\"\n  (let [normalize* (comp remove-empty-clauses\n                         perform-whole-query-transformations\n                         canonicalize\n                         normalize-tokens)]\n    (fn [query]\n      (try\n        (normalize* query)\n        (catch #?(:clj Throwable :cljs js/Error) e\n          (throw (ex-info (i18n/tru \"Error normalizing query\")\n                          {:query query}\n                          e)))))))\n\n(defn normalize-fragment\n  \"Normalize just a specific fragment of a query, such as just the inner MBQL part or just a filter clause. `path` is\n  where this fragment would normally live in a full query.\n\n    (normalize-fragment [:query :filter] [\\\"=\\\" 100 200])\n    ;;-> [:= [:field-id 100] 200]\"\n  {:style/indent 1}\n  [path x]\n  (if-not (seq path)\n    (normalize x)\n    (get (normalize-fragment (butlast path) {(last path) x}) (last path))))\n"]}