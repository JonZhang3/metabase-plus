{"version":3,"sources":["lambdaisland/glogi/console.cljs"],"mappings":"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","names":["js/goog.define","lambdaisland.glogi.console/colorize","lambdaisland.glogi.console/log-method","level","pred__41856","p1__41850#","p2__41849#","expr__41857","lambdaisland.glogi/level-value","p__41860","map__41862","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","lambdaisland.glogi.console/format-raw","logger-name","message","exception","p__41870","map__41871","lambdaisland.glogi.console/format-css","lambdaisland.glogi.print/format","p__41879","map__41882","lambdaisland.glogi.console/format-plain","cljs.core.pr_str","lambdaisland.glogi.console/make-console-log","format","p__41884","map__41885","record","method-name","method","or__4126__auto__","goog.object/get","js/console","js/console.log","G__41887","G__41888","G__41889","G__41890","js/lambdaisland","js/lambdaisland.glogi","js/lambdaisland.glogi.console","js/lambdaisland.glogi.console.console-log-raw","lambdaisland.glogi.console/console-log-raw","js/lambdaisland.glogi.console.console-log-css","lambdaisland.glogi.console/console-log-css","js/lambdaisland.glogi.console.console-log-plain","lambdaisland.glogi.console/console-log-plain","js/lambdaisland.glogi.console.format","lambdaisland.glogi.console/format","js/lambdaisland.glogi.console.console-log","lambdaisland.glogi.console/console-log","lambdaisland.glogi.console/devtools-installed?","js/devtools","js/devtools.core","js/devtools.core.installed_QMARK_","lambdaisland.glogi.console/browser?","js/window","lambdaisland.glogi.console/ie?","js/window.navigator","js/window.navigator.userAgent","lambdaisland.glogi.console/select-handler","G__41897","js/Error","cljs.core/not","lambdaisland.glogi.console/install!","temp__5735__auto__","instance","goog.debug.Console/instance","G__41905","lambdaisland.glogi/add-handler-once"],"sourcesContent":["(ns lambdaisland.glogi.console\n  (:require [lambdaisland.glogi :as glogi]\n            [lambdaisland.glogi.print :as print]\n            [goog.object :as gobj]\n            [goog.debug.LogBuffer :as LogBuffer]\n            [goog.debug.Console :as Console]))\n\n;; By default we do CSS colorization on non-IE browsers only. You can change\n;; this in your build with :closure-defines. Possible values: \"auto\" \"true\" \"false\"\n(goog-define colorize \"auto\")\n\n(defn log-method [level]\n  (condp #(>= %2 %1) (glogi/level-value level)\n    (glogi/level-value :severe)  \"error\"\n    (glogi/level-value :warning) \"warn\"\n    (glogi/level-value :info)    \"info\"\n    (glogi/level-value :config)  \"log\"\n    \"log\"))\n\n(defn format-raw [{:keys [level logger-name message exception]}]\n  [(str \"[\" logger-name \"]\") message])\n\n(defn format-css [{:keys [level logger-name message exception]}]\n  (print/format level logger-name message))\n\n(defn format-plain [{:keys [level logger-name message exception]}]\n  [(str \"[\" logger-name \"]\") (pr-str message)])\n\n(defn make-console-log [format]\n  (fn [{:keys [logger-name level exception] :as record}]\n    (let [method-name (log-method level)\n          method      (or (gobj/get js/console method-name)\n                          js/console.log)]\n      (apply method (format record))\n      (when exception\n        (method (str \"[\" logger-name \"]\") (str exception) \"\\n\" (.-stack exception))))))\n\n(defonce console-log-raw (make-console-log format-raw))\n(defonce console-log-css (make-console-log format-css))\n(defonce console-log-plain (make-console-log format-plain))\n\n;; backward compatibility\n(defonce format format-plain)\n(defonce console-log console-log-plain)\n\n(defn devtools-installed? []\n  (and (exists? js/devtools.core.installed_QMARK_)\n       (js/devtools.core.installed_QMARK_)))\n\n(defn- browser? []\n  (exists? js/window))\n\n(defn- ie? []\n  (and (browser?)\n       (exists? js/window.navigator)\n       (exists? js/window.navigator.userAgent)\n       ;; IE and pre-chromium EDGE don't support %c\n       (or (.includes js/window.navigator.userAgent \"MSIE\")\n           (.includes js/window.navigator.userAgent \"Trident\"))))\n\n(defn select-handler []\n  (case colorize\n    \"auto\"\n    (cond\n      (devtools-installed?)        console-log-raw\n      (and (browser?) (not (ie?))) console-log-css\n      :else                        console-log-plain)\n    \"raw\"\n    console-log-raw\n    \"true\"\n    console-log-css\n    \"false\"\n    console-log-plain))\n\n(defn install! []\n  ;; Disable goog.debug.Console if it's been enabled (e.g. by Figwheel), we do\n  ;; console logging now\n  (when-let [instance Console/instance]\n    (.setCapturing instance false))\n\n  (glogi/add-handler-once (select-handler)))\n"]}